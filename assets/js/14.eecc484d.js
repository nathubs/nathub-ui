(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{357:function(t,v,_){"use strict";_.r(v);var s=_(25),p=Object(s.a)({},(function(){var t=this,v=t.$createElement,_=t._self._c||v;return _("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[_("h1",{attrs:{id:"使用示例"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#使用示例"}},[t._v("#")]),t._v(" 使用示例")]),t._v(" "),_("h2",{attrs:{id:"统一准备工作（必做）"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#统一准备工作（必做）"}},[t._v("#")]),t._v(" 统一准备工作（必做）")]),t._v(" "),_("ul",[_("li",[t._v("开启服务端，假设公网服务器ip为1.1.1.1，配置文件中"),_("code",[t._v("bridge_port")]),t._v("为8024，配置文件中"),_("code",[t._v("web_port")]),t._v("为8080")]),t._v(" "),_("li",[t._v("访问1.1.1.1:8080")]),t._v(" "),_("li",[t._v("在客户端管理中创建一个客户端，记录下验证密钥")]),t._v(" "),_("li",[t._v("内网客户端运行（windows使用cmd运行加.exe）")])]),t._v(" "),_("div",{staticClass:"language-shell extra-class"},[_("pre",{pre:!0,attrs:{class:"language-shell"}},[_("code",[t._v("./npc -server"),_("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),_("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.1")]),t._v(".1.1:8024 -vkey"),_("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("客户端的密钥\n")])])]),_("p",[_("strong",[t._v("注意：运行服务端后，请确保能从客户端设备上正常访问配置文件中所配置的"),_("code",[t._v("bridge_port")]),t._v("端口，telnet，netcat这类的来检查")])]),t._v(" "),_("h2",{attrs:{id:"域名解析"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#域名解析"}},[t._v("#")]),t._v(" 域名解析")]),t._v(" "),_("p",[_("strong",[t._v("适用范围：")]),t._v(" 小程序开发、微信公众号开发、产品演示")]),t._v(" "),_("p",[_("strong",[t._v("注意：域名解析模式为http反向代理，不是dns服务器，在web上能够轻松灵活配置")])]),t._v(" "),_("p",[_("strong",[t._v("假设场景：")])]),t._v(" "),_("ul",[_("li",[t._v("有一个域名proxy.com，有一台公网机器ip为1.1.1.1")]),t._v(" "),_("li",[t._v("两个内网开发站点127.0.0.1:81，127.0.0.1:82")]),t._v(" "),_("li",[t._v("想通过（http|https://）a.proxy.com访问127.0.0.1:81，通过（http|https://）b.proxy.com访问127.0.0.1:82")])]),t._v(" "),_("p",[_("strong",[t._v("使用步骤")])]),t._v(" "),_("ul",[_("li",[t._v("将*.proxy.com解析到公网服务器1.1.1.1")]),t._v(" "),_("li",[t._v("点击刚才创建的客户端的域名管理，添加两条规则规则：1、域名："),_("code",[t._v("a.proxy.com")]),t._v("，内网目标："),_("code",[t._v("127.0.0.1:81")]),t._v("，2、域名："),_("code",[t._v("b.proxy.com")]),t._v("，内网目标："),_("code",[t._v("127.0.0.1:82")])])]),t._v(" "),_("p",[t._v("现在访问（http|https://）"),_("code",[t._v("a.proxy.com")]),t._v("，"),_("code",[t._v("b.proxy.com")]),t._v("即可成功")]),t._v(" "),_("p",[_("strong",[t._v("https:")]),t._v(" 如需使用https请进行相关配置，详见 "),_("a",{attrs:{href:"/nps_extend?id=%E4%BD%BF%E7%94%A8https"}},[t._v("使用https")])]),t._v(" "),_("h2",{attrs:{id:"tcp隧道"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#tcp隧道"}},[t._v("#")]),t._v(" tcp隧道")]),t._v(" "),_("p",[_("strong",[t._v("适用范围：")]),t._v("  ssh、远程桌面等tcp连接场景")]),t._v(" "),_("p",[_("strong",[t._v("假设场景：")]),t._v("\n想通过访问公网服务器1.1.1.1的8001端口，连接内网机器10.1.50.101的22端口，实现ssh连接")]),t._v(" "),_("p",[_("strong",[t._v("使用步骤")])]),t._v(" "),_("ul",[_("li",[t._v("在刚才创建的客户端隧道管理中添加一条tcp隧道，填写监听的端口（8001）、内网目标ip和目标端口（10.1.50.101:22），保存。")]),t._v(" "),_("li",[t._v("访问公网服务器ip（1.1.1.1）,填写的监听端口(8001)，相当于访问内网ip(10.1.50.101):目标端口(22)，例如："),_("code",[t._v("ssh -p 8001 root@1.1.1.1")])])]),t._v(" "),_("h2",{attrs:{id:"udp隧道"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#udp隧道"}},[t._v("#")]),t._v(" udp隧道")]),t._v(" "),_("p",[_("strong",[t._v("适用范围：")]),t._v("  内网dns解析等udp连接场景")]),t._v(" "),_("p",[_("strong",[t._v("假设场景：")]),t._v("\n内网有一台dns（10.1.50.102:53），在非内网环境下想使用该dns，公网服务器为1.1.1.1")]),t._v(" "),_("p",[_("strong",[t._v("使用步骤")])]),t._v(" "),_("ul",[_("li",[t._v("在刚才创建的客户端的隧道管理中添加一条udp隧道，填写监听的端口（53）、内网目标ip和目标端口（10.1.50.102:53），保存。")]),t._v(" "),_("li",[t._v("修改需要使用的dns地址为1.1.1.1，则相当于使用10.1.50.102作为dns服务器")])]),t._v(" "),_("h2",{attrs:{id:"socks5代理"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#socks5代理"}},[t._v("#")]),t._v(" socks5代理")]),t._v(" "),_("p",[_("strong",[t._v("适用范围：")]),t._v("  在外网环境下如同使用vpn一样访问内网设备或者资源")]),t._v(" "),_("p",[_("strong",[t._v("假设场景：")]),t._v("\n想将公网服务器1.1.1.1的8003端口作为socks5代理，达到访问内网任意设备或者资源的效果")]),t._v(" "),_("p",[_("strong",[t._v("使用步骤")])]),t._v(" "),_("ul",[_("li",[t._v("在刚才创建的客户端隧道管理中添加一条socks5代理，填写监听的端口（8003），保存。")]),t._v(" "),_("li",[t._v("在外网环境的本机配置socks5代理(例如使用proxifier进行全局代理)，ip为公网服务器ip（1.1.1.1），端口为填写的监听端口(8003)，即可畅享内网了")])]),t._v(" "),_("p",[_("strong",[t._v("注意")]),t._v("\n经过socks5代理，当收到socks5数据包时socket已经是accept状态。表现是扫描端口全open，建立连接后短时间关闭。若想同内网表现一致，建议远程连接一台设备。")]),t._v(" "),_("h2",{attrs:{id:"http正向代理"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#http正向代理"}},[t._v("#")]),t._v(" http正向代理")]),t._v(" "),_("p",[_("strong",[t._v("适用范围：")]),t._v("  在外网环境下使用http正向代理访问内网站点")]),t._v(" "),_("p",[_("strong",[t._v("假设场景：")]),t._v("\n想将公网服务器1.1.1.1的8004端口作为http代理，访问内网网站")]),t._v(" "),_("p",[_("strong",[t._v("使用步骤")])]),t._v(" "),_("ul",[_("li",[t._v("在刚才创建的客户端隧道管理中添加一条http代理，填写监听的端口（8004），保存。")]),t._v(" "),_("li",[t._v("在外网环境的本机配置http代理，ip为公网服务器ip（1.1.1.1），端口为填写的监听端口(8004)，即可访问了")])]),t._v(" "),_("p",[_("strong",[t._v("注意：对于私密代理与p2p，除了统一配置的客户端和服务端，还需要一个客户端作为访问端提供一个端口来访问")])]),t._v(" "),_("h2",{attrs:{id:"私密代理"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#私密代理"}},[t._v("#")]),t._v(" 私密代理")]),t._v(" "),_("p",[_("strong",[t._v("适用范围：")]),t._v("  无需占用多余的端口、安全性要求较高可以防止其他人连接的tcp服务，例如ssh。")]),t._v(" "),_("p",[_("strong",[t._v("假设场景：")]),t._v("\n无需新增多的端口实现访问内网服务器10.1.50.2的22端口")]),t._v(" "),_("p",[_("strong",[t._v("使用步骤")])]),t._v(" "),_("ul",[_("li",[t._v("在刚才创建的客户端中添加一条私密代理，并设置唯一密钥secrettest和内网目标10.1.50.2:22")]),t._v(" "),_("li",[t._v("在需要连接ssh的机器上以执行命令")])]),t._v(" "),_("div",{staticClass:"language- extra-class"},[_("pre",{pre:!0,attrs:{class:"language-text"}},[_("code",[t._v("./npc -server=1.1.1.1:8024 -vkey=vkey -type=tcp -password=secrettest -local_type=secret\n")])])]),_("p",[t._v("如需指定本地端口可加参数"),_("code",[t._v("-local_port=xx")]),t._v("，默认为2000")]),t._v(" "),_("p",[_("strong",[t._v("注意：")]),t._v(" password为web管理上添加的唯一密钥，具体命令可查看web管理上的命令提示")]),t._v(" "),_("p",[t._v("假设10.1.50.2用户名为root，现在执行"),_("code",[t._v("ssh -p 2000 root@127.0.0.1")]),t._v("即可访问ssh")]),t._v(" "),_("h2",{attrs:{id:"p2p服务"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#p2p服务"}},[t._v("#")]),t._v(" p2p服务")]),t._v(" "),_("p",[_("strong",[t._v("适用范围：")]),t._v("  大流量传输场景，流量不经过公网服务器，但是由于p2p穿透和nat类型关系较大，不保证100%成功，支持大部分nat类型。"),_("a",{attrs:{href:"/npc_extend?id=nat%E7%B1%BB%E5%9E%8B%E6%A3%80%E6%B5%8B"}},[t._v("nat类型检测")])]),t._v(" "),_("p",[_("strong",[t._v("假设场景：")])]),t._v(" "),_("p",[t._v("想通过访问使用端机器（访问端，也就是本机）的2000端口----\x3e访问到内网机器 10.2.50.2的22端口")]),t._v(" "),_("p",[_("strong",[t._v("使用步骤")])]),t._v(" "),_("ul",[_("li",[t._v("在"),_("code",[t._v("nps.conf")]),t._v("中设置"),_("code",[t._v("p2p_ip")]),t._v("（nps服务器ip）和"),_("code",[t._v("p2p_port")]),t._v("（nps服务器udp端口）")])]),t._v(" "),_("blockquote",[_("p",[t._v("注：若 "),_("code",[t._v("p2p_port")]),t._v(" 设置为6000，请在防火墙开放6000~6002(额外添加2个端口)udp端口")])]),t._v(" "),_("ul",[_("li",[t._v("在刚才刚才创建的客户端中添加一条p2p代理，并设置唯一密钥p2pssh")]),t._v(" "),_("li",[t._v("在使用端机器（本机）执行命令")])]),t._v(" "),_("div",{staticClass:"language- extra-class"},[_("pre",{pre:!0,attrs:{class:"language-text"}},[_("code",[t._v("./npc -server=1.1.1.1:8024 -vkey=123 -password=p2pssh -target=10.2.50.2:22\n")])])]),_("p",[t._v("如需指定本地端口可加参数"),_("code",[t._v("-local_port=xx")]),t._v("，默认为2000")]),t._v(" "),_("p",[_("strong",[t._v("注意：")]),t._v(" password为web管理上添加的唯一密钥，具体命令可查看web管理上的命令提示")]),t._v(" "),_("p",[t._v("假设内网机器为10.2.50.2的ssh用户名为root，现在在本机上执行"),_("code",[t._v("ssh -p 2000 root@127.0.0.1")]),t._v("即可访问机器2的ssh，如果是网站在浏览器访问127.0.0.1:2000端口即可。")])])}),[],!1,null,null,null);v.default=p.exports}}]);